\documentclass{article}

\usepackage{amsmath, amssymb}

\begin{document}
\title{OpenBazaar - Test Report}
\author{The Fair Traders\\Daniel Mandel - 1303865 - mandeldr\\Shandelle Murray - 1303109 - murras25\\Connor Sheehan - 1330964 - sheehacg}
\date{Friday, November 27\textsuperscript{th}, 2015}
\maketitle

\abstract{This report contains the test results for the OpenBazaar redevelopment project, for McMaster University SFWR 3XA3.}

% Create table of contents and add new page
\newpage
\tableofcontents
\newpage

% Start of document content
\part*{Introduction}
\section{Objective}
The objective of this document is to report the test results of the OpenBazaar application, revision zero. Testing at this phase is used to demonstrate the application's usability and to improve the robustness of the product. Developing a test suite will ensure that changes in one section of code do not cause bugs in other sections. Further, if the secret of a module is changed for any reason (improved performance, new technology etc), a pre-defined test framework will ensure the application can function after the change.

\section{Approach}

Our approach involves the use of the \texttt{unittest2} library that Python has available. Test cases will be written using the same design as any NUnit or JUnit implementation (Arrange Act Assert) \cite{aaa}. Meaning all variables at first will be created, manipulated and then verified. This is the most effective way of organizing unit tests and as well as extremely modular. All test cases will be run from the command line by simply running the test fixture (ex \texttt{python OBTests.py})

\section{Definitions}
\begin{itemize}
\item[Black Box Testing]
The process of testing a function or module without taking the internal implementation into account.

\item[White Box Testing]
The process of testing which takes the internal implementation into account, and ensures it's correctness.

\item[Usability Testing]
The process of evaluating a program by testing it on users. Provides direct input on how users will interact with the system.

\item[Ricardian Contract]
A contractual agreement for a trade which aims to be exact and unchangeable. Any contract is comprised of several modules which provide information about the interaction, as well as a hash of the data to ensure that the contract is not changed retroactively. Ricardian Contract's are human readable, as well as machine parsable. 

\item[Kademlia DHT]
A distributed hash table for decentralized peer-to-peer networks. This is the infrastructure used in the OpenBazaar application.
\end{itemize}

% Begin test result section.
% Test results contain more numeric, pass/fail values
% taken from unit tests.
\part*{Test Results}
\section{Black Box Testing}
\begin{itemize}
\item[Initialization Module]
Black box testing for the initialization module was performed by testing the \texttt{initialize\_bazaar} method. This method should be called on the first execution of OpenBazaar. After this method call completes, the identity module should contain several files related to GPG keys and an identity pickle file. The node module should also contain a pickle file.

\item[Identity Module]

\end{itemize}

\section{White Box Testing}
This section contains all unit test results that do not cover usability, performance or security. This is because the internal design of the software is known to the tester.\newline
\newline
\texttt{Class: RicardianContractTests}\newline
\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{test\_constructor}
\item Initial State: Nothing initialized
\item Input: \texttt{RicardianContract(\texttt{contract\_dict}, \texttt{seller\_settings})}
\item Expected Results: RicardianContract Object Instance
\item Results Match: Yes\newline
\end{itemize}
\end{itemize}

\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{test\_get\_module}
\item Initial State: testRicardianContract, \texttt{seller\_settings}, \texttt{contract\_dict} objects initialized
\item Input:
\begin{itemize}
\item tradeDict = testRicardianContract.get\_module('trade')
\item price = tradeDict['price']
\item item\_name = tradeDict['name']
\item keywords = tradeDict['keywords']
\end{itemize} 
\item Expected Results:
\begin{itemize}
\item \texttt{keywords == 'Head'
\item \texttt{item\_name} == 'Hat'
\item price == "50"}
\end{itemize}
\item Results Match: Yes\newline
\end{itemize}
\end{itemize}

\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{test\_contract\_hash}
\item Initial State: testRicardianContract, testRicardianContract2 objects initialized
\item Input:
\begin{itemize}
\item \texttt{hash1 = testRicardianContract.\texttt{contract\_hash()}
\item hash2 = testRicardianContract.\texttt{contract\_hash()}
\item hash3 = testRicardianContract2.\texttt{contract\_hash()}}
\end{itemize}
\item Expected Results:
\begin{itemize}
\item \texttt{hash1 == hash2
\item hash1 != hash3}
\end{itemize}
\item Results Match: Yes\newline
\end{itemize}
\end{itemize}

\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{test\_get\_dict}
\item Initial State: \texttt{contract\_dict}, idthing, \texttt{seller\_settings}, and testRicardianContract objects are initialized
\item Input: \texttt{type(testRicardianContract.\texttt{get\_dict()})}
\item Expected Results: \texttt{type(testRicardianContract.\texttt{get\_dict()}) == dict}
\item Results Match: Yes\newline\newline
\end{itemize}
\end{itemize}

\texttt{Class: InitializationModTests}\newline

\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{test\_create\_GUID}
\item Initial State: \texttt{setUp()} is called generating list of ten GUID's
\item Input: \texttt{len(guids) == len(set(guids))}
\item Expected Results: True
\item Results Match: Yes\newline
\end{itemize}
\end{itemize}

\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{test\_initialize\_Bazaar}
\item Initial State: setUp() is called generating a list of ten GUID's
\item Input:
\begin{itemize}
\item \texttt{self.assertTrue(os.path.isfile('identity/identity.p'))
\item self.assertTrue(os.path.isfile('identity/pubring.gpg'))
\item self.assertTrue(os.path.isfile('identity/\texttt{random\_seed'))}
\item self.assertTrue(os.path.isfile('identity/secring.gpg'))
\item self.assertTrue(os.path.isfile('identity/trustdb.gpg'))
\item self.assertTrue(os.path.isfile('node/node.p'))}
\end{itemize}
\item Expected Results: True
\item Results Match: Yes\newline
\end{itemize}
\end{itemize}

\begin{itemize}
\item
\begin{itemize}
\item Test Case Name: \texttt{gen\_keys\_test}
\item Initial State: setUp() is called generating a list of ten GUID's
\item Input: \texttt{self.assertTrue(len(self.key\_list) == len(set(self.key\_list)), "Generated keys are not all unique")}
\item Expected Results: True
\item Results Match: Yes\newline
\end{itemize}
\end{itemize}

\section{Usability Testing}
Usability testing for OpenBazaar is one of the most important phases of development. Concurrently, it is also one of the most difficult to develop adequate metrics for. The goal of OpenBazaar is to develop a decentralized trade medium that can compete with centralized services already in use. \cite{reqs_doc} To determine if OpenBazaar could be considered a viable replacement for such a service, testers were asked to proceed through the process of adding an item for sale, attempting to buy an item and messaging users.

\section{Performance Testing}
Several components of the OpenBazaar application were tested for their performance and reliability. 

\section{Security Testing}
Security testing of OpenBazaar is potentially the most important variety of testing due to the nature of the application. OpenBazaar must be secure in several different areas, specifically secure communication between network nodes and local data security. A person who wishes to perform an attack on the OpenBazaar could do so by intercepting communications between nodes (a man in the middle attack), hacking the locally stored user information, or spoofing the identity of a trusted user to gain access to privileged information.
% Begin test summary section.
% Summary contains plain english interpretations of the
% test results.
\part*{Test Summary}



\section{Changes Derived from Tests}
After running through all of our tests some changes were necessary. The following is a list of documented changes to our code after testing:
\newline
\begin{itemize}
\item Class: RicardianContract
\item Test: test contract hash
\item Output: Hash Object
\item Expected: String\newline
\end{itemize} 
After dicovering that the contract hash was returning the wrong object, we went back and reimplemented the contract hash function for the RicardianContract class.On testing of the RicardianContract module it was discovered that due to dynamic and duck typing, the \texttt{contract\_hash} method was returning a full hash object, instead of the hexadecimal representation as desired. This test failure was fixed by forcing the object to return the value of \texttt{hexdigest} instead of \texttt{\_\_str\_\_}.

\bibliography{ob_bib}
\bibliographystyle{plain}

\end{document}